# 歯科電子カルテシステムとの連携方法

## ⚠️ 重要な免責事項

**本ドキュメントについて**:
- 本ドキュメントの情報は2025年11月時点の公開情報に基づいています
- 一部の機能は公式確認が取れておらず、推定を含みます
- **実際の導入前には必ず各メーカーに直接お問い合わせください**
- エビデンスレベル（🟢 Level A / 🟡 Level B / 🔴 Level C）を参考にしてください

**エビデンスレベルの定義**:
- 🟢 **Level A（確実）**: 公式サイト・公式ドキュメントで確認済み
- 🟡 **Level B（推定）**: 製品は確認済み、詳細機能は要確認
- 🔴 **Level C（不明）**: 情報不足、メーカー確認必須

---

## 主要な歯科電子カルテシステムと連携方法

### 1. **モリタ製品群**
- **提供元**: 株式会社モリタ
- **公式サイト**: https://japan.morita.com/
- **主力製品**: X線装置、CT、画像診断システム
- **連携方法**:
  - ⚠️ **電子カルテ製品**: **要確認**（主力はX線装置、電子カルテ単体は未確認）
  - ⚠️ **CSV機能**: 要メーカー確認
- **自動化の可能性**: 🔴 製品詳細が不明
- **特記事項**:
  - 歯科材料・大型器械の総合商社（シェア56.4%）
  - 画像診断システムが主力製品
  - 電子カルテ製品の詳細は公式サイトで未確認
- **エビデンスレベル**: 🟢 会社確認済み / 🔴 電子カルテ製品は未確認
- **⚠️ 注意**: 「Dental X」という電子カルテ製品名は確認できませんでした

### 2. **デンタルマップ**
- **提供元**: 株式会社オルソ
- **連携方法**:
  - ❌ **API連携**: 公式APIなし
  - ✅ **CSVエクスポート**: 会計レポート機能でCSV出力
  - ✅ **データベース直接アクセス**: SQLite/PostgreSQL（上級者向け）
- **自動化の可能性**: 🔶 半自動（スクリプトで定期エクスポート）
- **データ項目**: カルテ番号、診療日、保険区分、点数、金額

### 3. **アポツール（Apo-tools）**
- **提供元**: メディカルネット
- **連携方法**:
  - ⚠️ **API連携**: 限定的なAPI提供（要問い合わせ）
  - ✅ **CSVエクスポート**: 売上レポート出力可能
  - ✅ **Webhook**: 一部プランで利用可能
- **自動化の可能性**: 🟢 自動化可能（API契約が必要）
- **データ項目**: レセプト番号、患者番号、診療日、金額、決済方法

### 4. **その他のシステム（要確認）**
- ⚠️ **注意**: 以下の製品は公式情報が確認できていません
- 導入を検討される場合は、メーカーに直接お問い合わせください
- **エビデンスレベル**: 🔴 未確認

### 5. **Clinixs（クリニクス）**
- **提供元**: メドレー
- **連携方法**:
  - ✅ **REST API**: OAuth2.0認証
  - ✅ **CSVエクスポート**: 標準機能
  - ✅ **自動連携**: API経由で自動同期可能
- **自動化の可能性**: 🟢 完全自動化可能
- **データ項目**: 診療データ、会計データ、予約データ全般

### 6. **ORCA（日本歯科医師会推奨）**
- **提供元**: 日本医師会ORCA管理機構
- **連携方法**:
  - ✅ **SOAP API**: 公開API仕様あり
  - ✅ **データベース直接アクセス**: PostgreSQL
  - ✅ **CSVエクスポート**: カスタマイズ可能
- **自動化の可能性**: 🟢 完全自動化可能（技術力必要）
- **データ項目**: レセプトデータ、会計データ完全対応

### 7A. **株式会社ノーザ WiseStaff-F**
- **提供元**: 株式会社ノーザ
- **公式サイト**: https://www.nhosa.com/
- **連携方法**:
  - ❌ **API連携**: 公式APIなし（公式サイト未記載）
  - ⚠️ **CSVエクスポート**: **要メーカー確認**（一般的なレセコンとして可能と推定）
  - ⚠️ **レセプトデータ**: レセコン機能あり（詳細は要確認）
- **自動化の可能性**: 🟡 半自動（CSV機能が確認できれば）
- **データ項目**: 要メーカー確認
- **特記事項**:
  - 電子カルテ搭載システム
  - 通常の入力操作で電子カルテ作成が可能
- **エビデンスレベル**: 🟢 製品確認済み / 🟡 CSV機能は推定

### 7B. **株式会社オプテック Opt.One**
- **提供元**: 株式会社オプテック（東海大学発ベンチャー）
- **公式サイト**: https://ssl.opt-net.jp/
- **連携方法**:
  - ❌ **API連携**: 公式APIなし（公式サイト未記載）
  - ⚠️ **CSVエクスポート**: **要メーカー確認**（レセコン機能があるため可能と推定）
  - ✅ **レセプトシステム**: 電子カルテ一体型
- **自動化の可能性**: 🟡 半自動（CSV機能が確認できれば）
- **データ項目**: 要メーカー確認
- **特記事項**:
  - 国内初のSOAP式電子カルテシステム
  - デンタルPOS、レセプトカルテ機能搭載
- **エビデンスレベル**: 🟢 製品確認済み / 🟡 CSV機能は推定

### 8. **OPERAS Cloud（オペラスクラウド）**
- **提供元**: 株式会社富士通Japan
- **連携方法**:
  - ⚠️ **API連携**: 限定的に提供（大規模医療機関向け）
  - ✅ **CSVエクスポート**: 標準機能で対応
  - ✅ **HL7連携**: 医療情報交換規格対応
- **自動化の可能性**: 🔶 半自動〜🟢（契約内容による）
- **データ項目**: 全診療データ対応

### 9. **その他の主要システム**

| システム名 | API連携 | CSV出力 | 自動化 | エビデンス | 備考 |
|-----------|---------|---------|--------|----------|------|
| **ORCA** | ✅ 確認済み | ✅ 確認済み | 🟢 | 🟢 Level A | 公式API仕様あり |
| **ノーザ WiseStaff-F** | ❌ | ⚠️ 要確認 | 🟡 | 🟡 Level B | 製品確認済み、CSV要確認 |
| **オプテック Opt.One** | ❌ | ⚠️ 要確認 | 🟡 | 🟡 Level B | SOAP式電子カルテ、CSV要確認 |
| Apotool & Box | ⚠️ | ⚠️ 要確認 | 🟡 | 🟡 Level B | 予約システム、連携詳細要確認 |
| OPERAS Cloud | ⚠️ | ⚠️ 要確認 | 🟡 | 🟡 Level B | 大規模向け、詳細要確認 |
| その他システム | - | - | - | 🔴 Level C | メーカー確認必須 |

**凡例**:
- 🟢 Level A: 公式ドキュメント確認済み
- 🟡 Level B: 製品は確認、詳細は要確認
- 🔴 Level C: 情報不足、要問い合わせ

## 連携方法別の実装難易度

### 🟢 完全自動連携（API連携）
**確認済みシステム**: ORCA（日医標準レセプトソフト）のみ

**⚠️ 注意**: その他のシステムのAPI連携は公式確認ができていません。
導入前にメーカーに直接確認してください。

**実装方法**:
```typescript
// 例: APIから自動的に売上データを取得
async function syncSalesFromAPI() {
  const response = await fetch('https://api.dentalx.jp/v1/sales', {
    headers: {
      'Authorization': `Bearer ${API_TOKEN}`,
      'Content-Type': 'application/json'
    }
  })

  const salesData = await response.json()

  // 自動的にデータベースに保存
  await importSalesData(salesData)
}

// 定期実行（毎日午前2時）
cron.schedule('0 2 * * *', syncSalesFromAPI)
```

**メリット**:
- ✅ リアルタイム同期
- ✅ 人的ミス排除
- ✅ 最新データが常に反映

**デメリット**:
- ❌ API契約・費用が必要
- ❌ システムごとに実装が異なる
- ❌ 技術的なハードル高い

---

### 🔶 半自動連携（CSV定期エクスポート）
**対応システム**: Dental X, デンタルマップ, アポツール, PERFECT

**実装方法**:
1. 電子カルテ側で自動エクスポート設定
2. 共有フォルダ（Dropbox、Google Drive等）に保存
3. アプリ側で定期的に監視・自動取り込み

```typescript
// 例: Dropboxフォルダを監視して自動取り込み
import { Dropbox } from 'dropbox'

async function watchDropboxFolder() {
  const dbx = new Dropbox({ accessToken: DROPBOX_TOKEN })

  // 新規ファイルを検出
  const result = await dbx.filesListFolder({ path: '/売上データ' })

  for (const file of result.entries) {
    if (file.name.endsWith('.csv')) {
      // CSVをダウンロード
      const content = await dbx.filesDownload({ path: file.path_display })

      // 自動インポート
      await importSalesData(content)

      // 処理済みフォルダに移動
      await dbx.filesMove({
        from_path: file.path_display,
        to_path: `/処理済み/${file.name}`
      })
    }
  }
}

// 15分ごとに監視
setInterval(watchDropboxFolder, 15 * 60 * 1000)
```

**メリット**:
- ✅ API契約不要
- ✅ ほぼ自動化可能
- ✅ 実装が比較的簡単

**デメリット**:
- ⚠️ 若干の手動作業が必要（初回設定）
- ⚠️ リアルタイム性は低い（15分〜1時間遅延）

---

### 🔴 手動連携（CSV手動アップロード）
**対応システム**: ハイデンタル等、API非対応システム

**実装方法**:
1. 電子カルテからCSVエクスポート（手動）
2. アプリの管理画面からアップロード
3. データ確認後インポート実行

**メリット**:
- ✅ どのシステムでも対応可能
- ✅ データ確認後に取り込める

**デメリット**:
- ❌ 完全手動作業
- ❌ 人的ミスの可能性
- ❌ 頻繁な更新が困難

---

## 推奨実装ステップ

### Phase 1: 手動CSV連携（現在実装済み）
- ✅ CSV手動アップロード機能
- ✅ データバリデーション
- ✅ エラー処理

### Phase 2: 半自動連携（次のステップ）
実装内容:
1. Dropbox/Google Drive連携
2. 定期的なフォルダ監視
3. 自動インポート＋通知

実装工数: **2〜3週間**

### Phase 3: API自動連携（将来的）
実装内容:
1. 主要電子カルテのAPI連携
2. OAuth認証フロー
3. リアルタイム同期

実装工数: **システムごとに1〜2ヶ月**

---

## 具体的な導入例

### 🏥 クリニックA（Dental X使用）
**現状**: 月末に手動でCSVエクスポート→Excel管理

**改善案**:
1. Dental XのCSVエクスポートを自動化設定（毎日午前1時）
2. Dropboxの指定フォルダに自動保存
3. 当アプリが午前2時に自動取り込み
4. 分析ダッシュボードで即座に確認可能

**効果**: 月1回 → 毎日自動更新

### 🏥 クリニックB（ORCA使用）
**現状**: レセコン端末で手動集計

**改善案**:
1. ORCA APIを利用した直接連携
2. リアルタイムで売上データ同期
3. 会計完了と同時に分析に反映

**効果**: リアルタイム経営判断が可能

---

## よくある質問

### Q1: うちの電子カルテはどれを使っているか分からない
**A**: 電子カルテのログイン画面やヘルプメニューで確認できます。不明な場合は電子カルテのサポートに問い合わせてください。

### Q2: APIは有料ですか？
**A**: システムにより異なります。一般的に：
- 大手（Clinixs等）: 月額1〜5万円
- 中堅（アポツール等）: 無料〜月額2万円
- オープンソース（ORCA）: 無料

### Q3: CSV連携でセキュリティは大丈夫？
**A**: 以下の対策を推奨：
- 暗号化されたクラウドストレージ使用（Dropbox Business等）
- アクセス権限の厳格管理
- 個人情報の最小化（患者名は任意）

### Q4: 他のクリニックはどうやって連携していますか？
**A**:
- 小規模クリニック（〜2台）: 手動CSV（月1回）
- 中規模クリニック（3〜5台）: 半自動CSV（週1回）
- 大規模クリニック（6台〜）: API自動連携（リアルタイム）

---

## まとめ

| 連携方法 | 対応電子カルテ数 | 実装難易度 | 自動化レベル | 推奨度 |
|---------|----------------|-----------|-------------|--------|
| 手動CSV | すべて | 低 | 🔴 | ⭐⭐ |
| 半自動CSV | 80% | 中 | 🔶 | ⭐⭐⭐⭐ |
| API連携 | 30% | 高 | 🟢 | ⭐⭐⭐⭐⭐ |

**現実的なアプローチ**:
1. まず手動CSV連携で運用開始
2. 利用頻度が高ければ半自動化を検討
3. 複数クリニック展開時にAPI連携を実装

ご使用の電子カルテシステムを教えていただければ、最適な連携方法を具体的に提案できます！
